#!/bin/bash

# Detect any connected network device
device=$(nmcli -t -f DEVICE,STATE device | awk -F: '$2=="connected"{print $1; exit}')

# Get IPv4 from that device
ip=$(nmcli -g IP4.ADDRESS device show "$device" 2>/dev/null \
      | head -n1 | cut -d/ -f1)

if [ -n "$device" ] && [ -n "$ip" ]; then
    echo "$ip"
else
    echo "No active device"
fi

